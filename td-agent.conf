<source>
@type tail
path /var/log/td-agent/docker
pos_file /var/log/x.pos
#format /^(?<data7>.+)$/
format /^(?<data7>{"container":"(?<container>.*)","name":"(?<name>.*)","memory":"(?<memory>.*)","mem_percent":"(?<mem_percent>.*)%","cpu":"(?<cpu_percent>.*)%","network":"(?<network_sent>.*)","blockio":"(?<blockinput>.*)","pids":"(?<pids>.*)","time7":(?<time7>.*)})/
types time7:integer,pids:integer
format json
tag jenkinslogs
</source>
# why
<filter jenkinslogs>
@type record_transformer
  <record>
    host "#{Socket.gethostname}"
    datatype7 "_dockerstatss"
  </record>
</filter>

#<match jenkinslogs>
#@type file
#@id jenkinsoutput_file
#path /var/log/td-agent/dockerstats
#</match>

<match jenkinslogs>
@type http
##endpoint_url    http://full-fluent.ipradr.com:31000/mongo.log
endpoint_url    http://localhost:9880/x.sense7
http_method     post
serializer      json
#cacert_file      STAR_sense7_app.crt
#client_cert_path star_sense7_app.key
</match>
