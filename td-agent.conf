<source>
@type tail
path /var/log/td-agent/docker
pos_file /var/log/x.pos
tag jenkinslogs
<parse>
        @type regexp
                        <pattern>
                                 format regexp
                                 expression /^(?<data7>{"container":"(?<container>.*)","name":"(?<name>.*)","memory":"(?<memory>.*)","mem_percent":"(?<mem_percent>.*)%","cpu":"(?<cpu_percent>.*)%","network":"(?<network_sent>.*)","blockio":"(?<blockinput>.*)","pids":"(?<pids>.*)"})$/
                                 </pattern>
        </parse>
</source>

<filter jenkinslogss>
@type record_transformer
  <record>
    host "#{Socket.gethostname}"
    datatype7 "_dockerstats"
  </record>
</filter>

<match jenkinslogs>
@type file
@id jenkinsoutput_file
path /var/log/td-agent/dockerstats
</match>
