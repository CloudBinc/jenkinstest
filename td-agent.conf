<source>
@type tail
path /var/log/td-agent/docker
pos_file /var/log/x.pos
tag docker.sense7
format /^(?<data7>{"container":"(?<container>.*)","name":"(?<name>.*)","memory":"(?<memory>.*)","mem_percent":"(?<mem_percent>.*)%","cpu":"(?<cpu_percent>.*)%","network":"(?<network_sent>.*)","blockio":"(?<blockinput>.*)","pids":"(?<pids>.*)","time7":(?<time7>.*)})/
</source>

<filter docker.sense7>
@type record_transformer
  <record>
    host "#{Socket.gethostname}"
    datatype7 "_dockerstats"
  </record>
</filter>

#<match jenkinslogs>
#@type file
#@id jenkinsoutput_file
#path /var/log/td-agent/dockerstats
#</match>

<match *.sense7>
  @type mongo
  host localhost
  port 27017
  database Logging
  collection logs

  capped
  capped_size 1024m


  <inject>
    time_key time
  </inject>

  <buffer>
    flush_interval 10s
  </buffer>
</match>

